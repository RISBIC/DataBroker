<section class="licence" ng-init="getLicence()">
  <h2>{{licence.name}}</h2>
  <form role="form" name="updateLicence" class="col-md-6" ng-submit="updateLicence()">
    <fieldset>
      <legend>Licence Name</legend>
      <div class="form-group">
        <label class="form-label">Licence Name</label>
        <input class="form-control" type="text" name="licencename" ng-model="licence.name" required>
        <p class="help-block">The name of the new licence agreement</p>
      </div>
      <div class="form-group">
        <label class="form-label">Comments</label>
        <textarea class="form-control" name="licencecomments" ng-model="licence.comment" required></textarea>
        <p class="help-block"></p>
      </div>
    </fieldset>
    <fieldset ng-repeat="section in licence.sections">
      <legend>{{section.headertext}}</legend>
      <div class="form-group" ng-repeat="field in section.fieldsdetails">
        <label ng-if="field.type != 'hidden'" class="form-label">{{field.label}}</label>

        <!-- Render Checkbox -->
        <div class="checkbox" ng-if="field.type == 'checkbox'" ng-repeat="option in field.optionvalues">
          <label>
            <input value="{{option.value}}" ng-model="option.value" type="{{field.type}}">{{option.label}}
          </label>
        </div>

        <!-- Render Select List -->
        <select ng-if="field.type == 'select'" class="form-control" name="{{field.name}}" value="{{field.value}}" ng-model="field.value" ng-required="field.required">
          <option value="{{option.value}}" ng-repeat="option in field.optionvalues" ng-selected="option.value == 'true'">{{option.label}}</option>
        </select>

        <!-- Render Textarea -->
        <textarea ng-if="field.type == 'textarea'" class="form-control" name="{{field.name}}" value="{{field.value}}" ng-model="field.value" ng-required="field.required"></textarea>

        <!-- Render Radio List -->
        <div ng-if="field.type == 'radio'" ng-repeat="option in field.optionvalues" class="radio">
          <label><input type="{{field.type}}" name="{{field.name}}" ng-model="field.value" value="{{option.value}}">{{option.label}}</label>
        </div>

        <!-- Render Range -->
        <input ng-if="field.type == 'range'" type="{{field.type}}" name="{{field.name}}" value="{{field.value}}" min="{{field.optionvalues[0].value}}" max="{{field.optionvalues[1].value}}" ng-model="field.value">

        <!-- Render Text, Date, Number etc -->
        <input ng-if="field.type != 'select' && field.type != 'checkbox' && field.type != 'textarea' && field.type != 'radio' && field.type != 'range'" class="form-control" type="{{field.type}}" name="{{field.name}}" value="{{field.value}}" ng-model="field.value" ng-required="field.required" ng-pattern="field.validations[0].regex">
        <p class="help-block">{{field.purpose}}</p>
      </div>
      <div class="form-group" class="col-md-6">
        <button type="submit" class="btn btn-default" ng-disabled="updateLicence.$invalid">Save</button>
      </div>
    </fieldset>
    <fieldset ng-if="licence.endpointfieldname != null">
      <legend>Data Upload</legend>
      <button class="btn btn-default" ng-file-select ng-model="files"><span ng-hide="files">Choose File...</span><span ng-show="files">{{files[0].name}}</span></button>
      <button class="btn btn-default" ng-if="files" ng-click="upload()">Upload</button>
    </fieldset>
</section>


